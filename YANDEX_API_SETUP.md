# Настройка Яндекс Геосаджест для подсказок адресов

## Что добавлено
- Автодополнение адресов при вводе в поле доставки
- Ограничение поиска по территории Дмитрова
- Серверный API endpoint для обхода CORS ограничений
- Клавиатурная навигация (стрелки, Enter, Escape)
- Debouncing запросов

## Настройка API ключа

### 1. Получение API ключа
1. Перейдите на [Яндекс.Консоль разработчика](https://console.cloud.yandex.ru/)
2. Создайте новый проект или выберите существующий
3. В разделе "API и сервисы" найдите "Yandex Geosuggest API"
4. Включите API и создайте API ключ

### 2. Настройка переменной окружения

#### Вариант 1: Использование PowerShell скрипта (рекомендуется)
1. Откройте PowerShell от имени администратора
2. Перейдите в папку проекта: `cd C:\Users\potyl\Projects\Kongotest`
3. Запустите скрипт: `.\set-yandex-key.ps1 -ApiKey "ВАШ_НАСТОЯЩИЙ_API_КЛЮЧ"`

#### Вариант 2: Ручная настройка
Добавьте в файл `.env.local` следующую строку:

```
YANDEX_MAPS_API_KEY=ваш_реальный_api_ключ_здесь
```

**Замените `ваш_реальный_api_ключ_здесь` на ваш настоящий API ключ от Яндекса.**

### 3. Проверка настройки
После добавления ключа:
1. Перезапустите сервер разработки: `npm run dev`
2. Откройте страницу доставки
3. Начните вводить адрес в поле "Введите адрес в Дмитрове..."
4. Если подсказки появились - настройка успешна!

### 4. Тестирование API ключа
Вы можете проверить статус API ключа по адресу:
`http://localhost:3000/api/test-yandex-key`

## Возможные проблемы

### Ошибка 403 Forbidden
- Проверьте правильность API ключа
- Убедитесь, что API включен в Яндекс.Консоли
- Проверьте квоты использования

### Подсказки не появляются
- Убедитесь, что переменная окружения добавлена в `.env.local`
- Перезапустите сервер после изменения переменных окружения
- Проверьте консоль браузера на ошибки

### CORS ошибки
- Функционал использует серверный proxy, поэтому CORS ошибок быть не должно
- Если возникают - проверьте работу API endpoint `/api/yandex-suggest`

## Функциональность

### Автодополнение
- Начинается после ввода 3+ символов
- Ограничено территорией Дмитрова (bounding box: 37.2,56.2~37.8,56.5)
- Показывает до 5 подсказок

### Управление
- **Стрелки ↑↓**: навигация по подсказкам
- **Enter**: выбор подсказки или поиск по введенному тексту
- **Escape**: закрытие списка подсказок
- **Клик вне поля**: закрытие списка подсказок

### Debouncing
- Запросы к API отправляются не чаще 1 раза в 300мс
- Предотвращает лишнюю нагрузку на API
